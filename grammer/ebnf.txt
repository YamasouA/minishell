program  ::= complete_commands? linebreak

linebreak  ::= '\n'?

complete_commands ::= command ( '|' command )*

command ::= simple_command

simple_command ::= ( io_redirect | ASSIGNMENT_WORD )+ ( cmd_word cmd_suffix? )? | cmd_name cmd_suffix?

// コマンドの前では、代入操作が行える
cmd_prefix ::= io_redirect | cmd_prefix io_redirect | ASSIGNMENT_WORD | cmd_prefix ASSIGNMENT_WORD

// コマンドの後ろでは、代入操作は行われず、コマンドの引数として扱われる
cmd_suffix ::= ( io_redirect | WORD )+

cmd_word ::= WORD         /* Apply rule 7b */
cmd_name ::= WORD         /* Apply rule 7a */  = がない

io_redirect ::= IO_NUMBER? ( io_file | io_here )

io_file  ::= ( '<' | '>' | DGREAT ) filename

io_here  ::= DLESS here_end

here_end ::= WORD
